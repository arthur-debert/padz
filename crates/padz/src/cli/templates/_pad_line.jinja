{#- Single pad line rendering using Tabular -#}
{#- Expects: pad (PadLineData), peek (bool), col_* (column widths) -#}

{#- Determine index style based on section type -#}
{%- set index_style = "list-index" -%}
{%- if pad.is_pinned_section -%}
  {%- set index_style = "pinned" -%}
{%- elif pad.is_deleted -%}
  {%- set index_style = "deleted-index" -%}
{%- endif -%}

{#- Determine title style based on state -#}
{%- set title_style = "list-title" -%}
{%- if pad.is_deleted -%}
  {%- set title_style = "deleted-title" -%}
{%- elif peek -%}
  {%- set title_style = "title" -%}
{%- endif -%}

{#- Build tags string -#}
{%- set tags_str = "" -%}
{%- for tag in pad.tags -%}
  {%- set tags_str = tags_str ~ " [tag]" ~ tag ~ "[/tag]" -%}
{%- endfor -%}

{#- Define tabular layout with styles at column level -#}
{%- set t = tabular([
    {"name": "left_pin", "width": col_left_pin, "style": "pinned"},
    {"name": "status", "width": col_status, "style": "status-icon"},
    {"name": "index", "width": col_index, "style": index_style},
    {"name": "title", "width": pad.title_width, "overflow": "truncate", "style": title_style},
    {"name": "time", "width": col_time, "align": "right", "style": "time"}
]) -%}

{#- Render the row with indent prefix -#}
{#- Note: tags are appended after title column since they have variable count -#}
{{- pad.indent -}}
{{- t.row([
    pad.left_pin,
    pad.status_icon,
    pad.index,
    pad.title ~ tags_str,
    pad.time_ago
]) -}}
{{ "" | nl -}}
