{#- Single pad line rendering -#}
{#- Expects: pad (PadLineData), pin_marker, peek (bool), col_* (column widths) -#}

{#- Determine index style based on section type -#}
{%- set index_style = "list-index" -%}
{%- if pad.is_pinned_section -%}
  {%- set index_style = "pinned" -%}
{%- elif pad.is_deleted -%}
  {%- set index_style = "deleted-index" -%}
{%- endif -%}

{#- Determine title style based on state -#}
{%- set title_style = "list-title" -%}
{%- if pad.is_deleted -%}
  {%- set title_style = "deleted-title" -%}
{%- elif peek -%}
  {%- set title_style = "title" -%}
{%- endif -%}

{#- Format tags for display -#}
{%- set tags_display = "" -%}
{%- if pad.tags | length > 0 -%}
  {%- for tag in pad.tags -%}
    {%- set tags_display = tags_display ~ " [" ~ tag ~ "]" -%}
  {%- endfor -%}
{%- endif -%}

{#- Render the pad line using col() filter for layout -#}
{#- Layout: indent | left_pin(2) | status(2) | index(4) | title(fill) | tags | right_pin(2) | time(14) -#}
{{- pad.indent -}}
{{- pad.left_pin | col(col_left_pin) | style("pinned") -}}
{{- pad.status_icon | col(col_status) | style("status-icon") -}}
{{- pad.index | col(col_index) | style(index_style) -}}
{{- pad.title | col(pad.title_width) | style(title_style) -}}
{%- if tags_display -%}{{- tags_display | style("tag") -}}{%- endif -%}
{{- pad.right_pin | col(col_right_pin) | style("pinned") -}}
{{- pad.time_ago | col(col_time, align='right') | style("time") | nl -}}
