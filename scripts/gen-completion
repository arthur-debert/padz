#!/usr/bin/env bash
set -euo pipefail

# Always build the binary to ensure it's for the current platform
echo "Building padz..."
./scripts/build

# Create completions directory
mkdir -p completions

# Generate completions
echo "Generating bash completion..."
./bin/padz completion bash > completions/padz.bash

echo "Generating zsh completion..."
./bin/padz completion zsh > completions/_padz

echo "Generating fish completion..."
./bin/padz completion fish > completions/padz.fish

echo "âœ… Completions generated in completions/"